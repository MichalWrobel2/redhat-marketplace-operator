apiVersion: skaffold/v2beta1
kind: Config
build:
  tagPolicy:
    envTemplate:
      template: '{{.IMAGE_NAME}}'
  cluster: {}
  artifacts:
    - image: redhat-marketplace-operator
      custom:
        buildCommand: ./scripts/skaffold_build.sh
        dependencies:
          paths:
            - ./cmd
            - ./pkg
            - ./assets
            - ./deploy/chart
          ignore:
            - vendor/**
    - image: redhat-marketplace-reporter
      custom:
        buildCommand: ./scripts/skaffold-build-reporter.sh
        dependencies:
          paths:
            - ./cmd
            - ./pkg
            - ./assets
          ignore:
            - vendor/**
deploy:
  kubectl:
    manifests:
      - deploy/crds/*cr.yaml
      - deploy/*.yaml
    flags:
      disableValidation: true
